<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link rel="alternate"
      type="application/rss+xml"
      href="https://bastibe.de/rss.xml"
      title="RSS feed for https://bastibe.de/"/>
<title>Bastibe.de</title>
<meta name="author" content="Bastian Bechtold">
<meta name="referrer" content="no-referrer">
<link href= "static/style.css" rel="stylesheet" type="text/css" />
<link rel="icon" href="static/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="static/favicon-152.png">
<link rel="msapplication-TitleImage" href="static/favicon-144.png">
<link rel="msapplication-TitleColor" href="#0141ff">
<script src="static/katex.min.js"></script>
<script src="static/auto-render.min.js"></script>
<link rel="stylesheet" href="static/katex.min.css">
<script>document.addEventListener("DOMContentLoaded", function() { renderMathInElement(document.body); });</script>
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8">
<meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1"></head>
<body>
<div id="preamble" class="status"><div class="header">
  <a href="https://bastibe.de">Basti's Scratchpad on the Internet</a>
  <div class="sitelinks">
    <a href="https://twitter.com/paperflyer">Twitter</a> | <a href="https://github.com/bastibe">Github</a> | <a href="https://bastibe.de/projects.html">Projects</a>
  </div>
</div></div>
<div id="content">

<div class="post-date">06 Jan 2019</div><h1 class="post-title"><a href="2019-01-06-books-of-2018.html">Books of 2018</a></h1>
<p>
There is no other media more immersive to me than reading. When I read, I dive deep into another world, and seize to perceive the reality around me. It is my escape from the everyday stresses of living in the modern world. Reading is truly sacred to me. So here are my favorite pieces of writing of 2018:
</p>

<div id="outline-container-orga8d734c" class="outline-2">
<h2 id="orga8d734c"><a href="https://www.goodreads.com/book/show/9530.Shadow_Divers">Shadow Divers</a></h2>
<div class="outline-text-2" id="text-orga8d734c">

<figure>
<img src="https://bastibe.de/static/2019-01/shadow-divers-cover.jpg" alt="shadow-divers-cover.jpg" style="float:left;margin:5px;margin-right:20px" width="150px">

</figure>

<p>
This is a book about deep wreck diving. I am not interested in wrecks, or diving. Nevertheless, no book gripped me as hard last year as Shadow Divers. At first, I was a bit thrown off by the writing style, and thought it dramatized things too much. But I just couldn't put this book down. There were times when I surfaced from reading with a distinct feeling of having been there, of having touched that menacing shipwreck at the bottom of the ocean.
</p>

<p>
By the end of it, I was entirely engrossed in the story and its characters and the history of the mystery wreck. And then, in the epilogue, I learned that what I had thought embellished at first was actually meticulously researched and not overdramatic at all.
</p>

<p>
And best of all, my favorite podcast, <a href="http://omegataupodcast.net">Omega Tau</a> had <a href="http://omegataupodcast.net/33-deep-wreck-diving/">an interview</a> with the main protagonist of the book, which is just fascinating!
</p>
</div>
</div>

<div id="outline-container-org5f7b87d" class="outline-2">
<h2 id="org5f7b87d"><a href="https://www.goodreads.com/book/show/34757960-the-shortest-history-of-germany">The Shortest History of Germany</a></h2>
<div class="outline-text-2" id="text-org5f7b87d">

<figure>
<img src="https://bastibe.de/static/2019-01/german-history-cover.jpg" alt="german-history-cover.jpg" style="float:left;margin:5px;margin-right:20px" width="150px">

</figure>

<p>
This book is a strange choice to put on my list of books, because I didn't like it too much. I found it offputting which parts of history the author emphasized, and which parts he skipped. Apparently, the two world wars did not bear mentioning. The book paints a strangely specific west-vs-east map of Germany, which is not without merit, but surely not the whole story. And worst of all, I really didn't care for the writing style at all.
</p>

<p>
But when I look back on 2018, this book has stuck with me. Never mind its shortcomings, it has given me a map of Germany's history that I can fit other pieces of knowledge into. And that makes it valuable to me.
</p>
</div>
</div>

<div id="outline-container-org61fb18e" class="outline-2">
<h2 id="org61fb18e"><a href="https://uncannymagazine.com/article/and-then-there-were-n-one/">And then there were (N-One)</a></h2>
<div class="outline-text-2" id="text-org61fb18e">

<figure>
<img src="https://bastibe.de/static/2019-01/n-1-cover.jpg" alt="n-1-cover.jpg" style="float:left;margin:5px;margin-right:20px" width="150px">

</figure>

<p>
I love short stories. And this one is just brilliant. It is by Sarah Pinsker, about Sarah Pinsker, and all Sarah Pinskers from neighboring parallel universes. Every character in this book is a Sarah Pinsker. And all of them agree, Sarah is no murderer. Yet, one of them has been found murdered.
</p>

<p>
I won't spoil more of it, just head over to the <a href="https://uncannymagazine.com/article/and-then-there-were-n-one/">Uncanny Magazine</a> and read it for yourself!
</p>
</div>
</div>

<div id="outline-container-orgf42018b" class="outline-2">
<h2 id="orgf42018b">Graphic Novels</h2>
<div class="outline-text-2" id="text-orgf42018b">
<p>
For years now, I have struggled to find graphic novels that speak to me. I usually find the drawing style off-putting, and would have preferred a more fleshed out novel instead of a shallow graphic novel. But this year, I found two brilliant graphic novels that I loved dearly:
</p>

<ul class="org-ul">
<li><a href="https://www.goodreads.com/book/show/15195.The_Complete_Maus">Maus</a></li>
</ul>

<figure>
<img src="https://bastibe.de/static/2019-01/maus-cover.jpg" alt="maus-cover.jpg" style="float:left;margin:5px;margin-right:20px" width="150px">

</figure>

<p>
The half-auto-biographical narrative of a survivor of one the Nazi concentration camps. The novel juxtaposes the author's struggle to interview his father about his past, and thereby shows both the cruelty of the father's experience, and the man that this experience created. Both of these perspectives add weight to the unspeakable nastiness of the Holocaust.
</p>

<p>
But beyond that, it is also a story of humanity, struggle, and the small moments of joy amidst all the terror. Truly a masterpiece of a book.
</p>

<ul class="org-ul">
<li><a href="https://www.goodreads.com/book/show/19351043-nimona">Nimona</a></li>
</ul>

<figure>
<img src="https://bastibe.de/static/2019-01/nimona-cover.jpg" alt="nimona-cover.jpg" style="float:left;margin:5px;margin-right:20px" width="150px">

</figure>

<p>
In sharp contrast to the previous book, Nimona is just plain fun! Nimona is a teenage girl, and a shark, and the sidekick of Balister Blackheart, the biggest name in Supervillainy. And if you haven't guessed it from this description, it is wacky, and funny, and uplifting, and just&#x2026; fun!
</p>

<p>
You can read the first three chapters <a href="http://gingerhaze.com/nimona">online</a>, and then you'll want to read the rest, too. It's just too much fun!
</p>
</div>
</div>
<div class="taglist"><a href="tags.html">Tags:</a> <a href="tag-books.html">books</a> </div>
<div class="post-date">08 Nov 2018</div><h1 class="post-title"><a href="2018-11-08-cool-python-libraries.html">Cool Python Libraries: TQDM and Resampy</a></h1>
<p>
In my recent post about <a href="https://bastibe.de/2018-10-14-appreciation-for-open-source-and-commercial-software.html">appreciation for open source software</a>, I mentioned that we should praise our open source heros more often. So here are two lesser-known libraries that I use daily, and which are unabashedly awesome:
</p>

<div id="outline-container-orgda06c2f" class="outline-2">
<h2 id="orgda06c2f"><a href="https://tqdm.github.io/">TQDM</a></h2>
<div class="outline-text-2" id="text-orgda06c2f">
<p>
TQDM draws text progress bars for long-running processes, simply by wrapping your iterator in <code>tqdm(iterator)</code>. And this, alone, would be awesome. But, TQDM is one of those libraries that aren't just a good idea, but then go the extra mile, and add fantastic documentation, contingencies for all kinds of weird use cases, and integration with notebooks and GUIs.
</p>

<p>
I use TQDM all the time, for running my scientific experiments and data analysis, and it just works. For long-running tasks, I recommend using <code>tqdm(iterator, smoothing=0, desc='calculating')</code>, which adds a meaningful description to the progress bar, and an accurate runtime estimate.
</p>
</div>
</div>

<div id="outline-container-orgce3f785" class="outline-2">
<h2 id="orgce3f785"><a href="https://resampy.readthedocs.io/en/latest/">Resampy</a></h2>
<div class="outline-text-2" id="text-orgce3f785">
<p>
Resampy resamples numpy signals. Resample your data with <code>resample(signal, old_samplerate, new_samplerate)</code>. Just like with TQDM, this simple interface hides a lot of complexity and flexibility under the hood, yet remains conceptually simple and easy to use.
</p>

<p>
But beyond simplicity, resampy uses a clever implementation that is a far cry better than <code>scipy.signal.resample</code>, while still being easy to install and fast. For a more thorough comparison of resampling algorithms, visit <a href="https://signalsprocessed.blogspot.com/2016/08/audio-resampling-in-python.html">Joachim Thiemann's blog</a>.
</p>
</div>
</div>
<div class="taglist"><a href="tags.html">Tags:</a> <a href="tag-python.html">python</a> </div>
<div class="post-date">26 Oct 2018</div><h1 class="post-title"><a href="2018-10-26-dealing-with-unreliable-software.html">Dealing with Unreliable Software</a></h1>
<p>
About a year ago, I started working on a big comparison study between a bunch of scientific algorithms. Many of these have open-source software available, and I wanted to evaluate them with a large variety of input signals. The problem is, this is <a href="https://bastibe.de/2017-05-14-scientific-code.html">scientific code</a>, i.e. the worst code imaginable.
</p>

<p>
Things this code has done to my computer:
</p>
<ul class="org-ul">
<li>it crashed, throwing an error, and shutting down nicely</li>
<li>it crashed with a segfault, taking the owning process with it</li>
<li>it crashed, leaving temporary files lying around</li>
<li>it crashed, leaving zombie processes lying around</li>
<li>it spin-locked, and never returned</li>
<li>it spin-locked, and forked uncontrollably until all process decriptors were exhausted</li>
<li>it spin-locked, and ate memory uncontrollably until all memory was consumed</li>
<li>it crashed other, unrelated programs (no idea how it managed that)</li>
<li>it corrupted the root file system (no idea how it managed that)</li>
</ul>

<p>
Note that the code did not do any of this intentionally. It was merely code written by non-expert programmers, the problems often a side effect of performance optimizations. The code mostly works fine if called only once or twice. My problems only become apparent if I ran it, say, a few hundred thousand times, with dozens of processes in parallel.
</p>

<p>
So, how do you deal with this? Multi-threading is not an option, since a segfault would kill the whole program. So it has to be multi-processing. But all the multi-processing frameworks I know will lose all progress if one of the more sinister scenarios from the above list hard-crashed one or more of its processes. I needed a more robust solution.
</p>

<p>
Basically, the only hope of survival at this point is the kernel. Only the kernel has enough power to rein in rogue processes, and deal with hard crashes. So in my <a href="https://github.com/bastibe/runforrest">purpose-built multi-processing framework</a>, every task runs in its own process, with inputs and outputs written to unique files. And crucially, if any task does not finish within a set amount of time, it and all of its children are killed.
</p>

<p>
It took me quite a while to figure out how to do this, so here's the deal:
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #111111; font-style: italic;"># </span><span style="color: #111111; font-style: italic;">start your process with a new process group:</span>
<span style="color: #111111;">process</span> = Popen(..., start_new_session=<span style="color: #111111;">True</span>)

<span style="color: #111111; font-style: italic;"># </span><span style="color: #111111; font-style: italic;">after a timeout, kill the whole process group:</span>
<span style="color: #111111;">process_group_id</span> = os.getpgid(process.pid)
os.killpg(process_group_id, signal.SIGKILL)
</pre>
</div>

<p>
This is the nuclear option. I tried <code>SIGTERM</code> and <code>SIGHUP</code> instead, but programs would happily ignore it. I tried killing or terminating only the <code>process</code>, but that would leave zombie children. Sending <code>SIGKILL</code> to the process group does not take prisoners. The processes do not get a chance to respond or clean up after themselves. But you know what, after months of dealing with this stuff, this is the first time that my experiments actually run reliably for a few days without crashing or exhausting some resource. If that's what it takes, so be it.
</p>
<div class="taglist"><a href="tags.html">Tags:</a> <a href="tag-programming.html">programming</a> </div>
<div class="post-date">14 Oct 2018</div><h1 class="post-title"><a href="2018-10-14-appreciation-for-open-source-and-commercial-software.html">Appreciation for Open Source and Commercial Software</a></h1>
<p>
I recently released my first-ever piece of commercial software, a <a href="https://missiongenerator.eu/">plugin</a> for the <a href="https://www.x-plane.com/">X-Plane</a> flight simulator. I wrote this primarily to scratch my own itch, but thought other users might like it, too, so I put it up on <a href="https://store.x-plane.org/Mission-Generator_p_877.html">the store</a>. What struck me however, were the stark difference between the kinds of responses I got to this, as compared to my open source projects: They were astonishingly, resoundingly, <i>positive</i>!
</p>

<p>
You see, I have a bunch of open source projects, with a few thousand downloads per month, and a dozen or so issues on Github per week. Most of my interactions with my users are utilitarian, and efficient. Someone reports a bug or asks for help, I ask for clarification or a pull request, we iterate a few times until the issue is resolved. The process is mechanical and the tone of our conversation is equally unemotional. This is as it should be.
</p>

<p>
After having released my flight simulator plugin, however, people <i>thanked me</i>! They <i>congratulated me</i>! They extolled about the greatness of what I had built! And they did this despite the fact that the initial release had quite a few major bugs, and even flat-out did not work for some people. Yet even people who couldn't get it to work were <i>grateful</i> for my help in resolving their issue!
</p>

<p>
This <i>blew my mind</i>, in comparison with the drab "I found a bug", "Could you implement…" I was used to from my open source work. There, the feedback I got was mostly neutral (bug reports, feature requests), and sometimes even negative ("You broke something!"). So I release my software <i>for free</i>, as a gift, and get average-negative feedback. My commercial work, in contrast, <i>costs money</i>, and yet the feedback I get is resoundingly positive! I can not overstate how motivating it is to get praise, and love, from my users.
</p>

<p>
I think this is a huge problem for our Open Source community. I had my run-ins with burnout, when all the pull requests came to be too much, and I started dreading the little notification icon on Github. And I think the negativity inherent in bug reports and feature requests has a huge part to do with this. In the future, I will try to add more praise to my bug reports from now on, just to put things into perspective.
</p>

<p>
But I think we should go further than that. We should create tools for praising stuff, beyond the impersonal Stars on Github. We should be able to write reviews on Github, and recommendations, and blog posts about cool libraries we find.
</p>

<p>
I recently got my first github issue that was <a href="https://github.com/bastibe/org-static-blog/issues/12">just a thank-you note</a>. I loved it! We need more positivity like that.
</p>
<div class="taglist"><a href="tags.html">Tags:</a> <a href="tag-open-source.html">open-source</a> <a href="tag-thank-you.html">thank-you</a> </div>
<div class="post-date">03 Jun 2018</div><h1 class="post-title"><a href="2018-06-03-syncing-org-journal-with-your-calendar.html">Syncing Org-Journal with your Calendar</a></h1>
<p>
<a href="https://bastibe.de/2018-04-02-scheduling-future-todos-in-org-journal.html">A month ago</a>, org-journal learned to deal with future journal entries. I use future journal entries for appointments or not-yet-actionable tasks that I don't want in my current TODO list just yet. This works really well while I am at my computer, and really does not work at all when I am not (<a href="http://www.orgzly.com/">Orgzly</a> does <i>not</i> work with my 1k-file journal directory).
</p>

<p>
But, as I keep re-discovering, org-mode already has a solution for this: org-mode can export your agenda to an iCalendar file! Most calendar applications can then subscribe to that file, and show your future journal entries right in your calendar. And if you set it up right, this will even sync changes to your calendar!
</p>

<p>
First, you need to set up some kind of regular export job. I use a cron job that regularly runs an Emacs batch job <code>emacs --batch --script ~/bin/calendar_init.el</code> with the following code in <i>calendar​_init.el</i>:
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #111111; font-style: italic;">;; </span><span style="color: #111111; font-style: italic;">no init file is loaded, so provide everything here:</span>
(add-to-list 'load-path <span style="color: #303030;">"~/etc/org-journal/"</span>)
(<span style="color: #111111; font-weight: bold;">setq</span> org-journal-dir <span style="color: #303030;">"~/journal/"</span>            <span style="color: #111111; font-style: italic;">; </span><span style="color: #111111; font-style: italic;">where my journal files are</span>
      org-journal-file-format <span style="color: #303030;">"%Y-%m-%d.org"</span>  <span style="color: #111111; font-style: italic;">; </span><span style="color: #111111; font-style: italic;">their file names</span>
      org-journal-enable-agenda-integration t <span style="color: #111111; font-style: italic;">; </span><span style="color: #111111; font-style: italic;">so entries are on the agenda</span>
      org-icalendar-store-UID t               <span style="color: #111111; font-style: italic;">; </span><span style="color: #111111; font-style: italic;">so changes sync correctly</span>
      org-icalendar-include-todo <span style="color: #303030;">"all"</span>        <span style="color: #111111; font-style: italic;">; </span><span style="color: #111111; font-style: italic;">include TODOs and DONEs</span>
      org-icalendar-combined-agenda-file <span style="color: #303030;">"~/calendar/org-journal.ics"</span>)

(<span style="color: #111111; font-weight: bold;">require</span> '<span style="color: #111111;">org-journal</span>)
(org-journal-update-org-agenda-files) <span style="color: #111111; font-style: italic;">; </span><span style="color: #111111; font-style: italic;">put future entries on the agenda</span>
(org-icalendar-combine-agenda-files)  <span style="color: #111111; font-style: italic;">; </span><span style="color: #111111; font-style: italic;">export the ICS file</span>
(save-buffers-kill-emacs t)           <span style="color: #111111; font-style: italic;">; </span><span style="color: #111111; font-style: italic;">save all modified files and exit</span>
</pre>
</div>

<p>
It is important to set <code>org-icalendar-store-UID</code>, as otherwise every change to a future entry would result in a duplicated calendar entry. It will clutter up your journal entries with an <code>UID</code> property, though.
</p>

<p>
I do this on my web server, with my journal files <a href="https://syncthing.net/">syncthing</a>ed from my other computers. With that, I can subscribe to the calendar file from any internet-connected computer or mobile phone (using <a href="https://icsdroid.bitfire.at/">ICSdroid</a>). But you could just as well sync only the ICS file, or just subscribe to the local file, if you don't want to upload your complete yournal to a web server.
</p>

<p>
(Incidentally, I first implemented my own ICS export, before realizing that this functionality already existed in org-mode. It was a fun little project, and I learned a lot about org-mode's internal data structures and the weirdness that are iCalendar files.)
</p>
<div class="taglist"><a href="tags.html">Tags:</a> <a href="tag-org-journal.html">org-journal</a> </div><div id="archive">
<a href="archive.html">Other posts</a>
</div>
</div>
</body>
</html>
