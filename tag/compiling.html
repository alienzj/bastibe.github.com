<!doctype html>
<html> <head> <link href='http://fonts.googleapis.com/css?family=Roboto&subset=latin' rel='stylesheet' type='text/css'> <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'> <title>Bastis Scratchpad on the Internet</title> <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" /> <meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1"> <link href= "http://bastibe.de/css/style.css" rel="stylesheet" type="text/css" /> <link rel="alternate" href="http://bastibe.de/rss.xml" type="application/rss+xml" /> <script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: { inlineMath: [["$","$"]] }});
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </head> <body> <div class="header"> <a href="http://bastibe.de">Bastis Scratchpad on the Internet</a> <div class="sitelinks"> <a href="http://alpha.app.net/bastibe">alpha.app.net</a>  | <a href="http://github.com/bastibe">Github</a>  </div> </div> <div id="content"> <div class="article-meta"> <a class="article-title" href="http://bastibe.de/posts/How-to-gem-install-rlua-on-OSXhomebrew.html">How to gem install rlua on OSX/homebrew</a> <div class="date"> posted on 2012-02-22 11:43</div> <div class="article">

<p>If you want to use rlua, you need to have Lua installed. However, OSX does not come with Lua preinstalled, so you install it using</p>

<pre><code>brew install lua
</code></pre>

<p>Oh, would it be nice if everyone agreed on how to install stuff like this. Case in point, homebrew installs liblua (quite reasonable) in <code>/usr/local/lib/liblua.[5.1[.4]].dylib</code></p>

<p>rlua however expects it to be called <code>liblua5.1.dylib</code> (notice the missing <code>.</code>).</p>

<p>Similarly, the headers are installed plainly into <code>/usr/local/include</code>, whereas rlua expects them to be in a folder called <code>lua5.1</code>.</p>

<p>Hence, here is how you get rlua to install:</p>

<pre><code>ln -s /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib /usr/local/lib/liblua5.1.dylib
ln -s /usr/local/Cellar/lua/5.1.4/include/ /usr/local/include/lua5.1
</code></pre>

<p>Not exactly a beautiful solution, but it works.</p>
</div> <hr> </div><div class="article-meta"> <a class="article-title" href="http://bastibe.de/posts/Compiling-Scipy-and-Matplotlib-again.html">Compiling Scipy and Matplotlib again</a> <div class="date"> posted on 2011-10-13 15:27</div> <div class="article">

<p>Well, it's compile time again. Once again, I need to install scipy and matplotlib using homebrew and pip on Lion.<br/>
It seems things have improved since I tried to compile last time! Well, it still does not work out of the box, but at least now it can be done without compiling by hand:
(remember to brew install pkg-config and gfortran first)</p>

<p><code>pip install -e git+https://github.com/scipy/scipy#egg=scipy-dev</code><br/>
<code>pip install -e git+https://github.com/matplotlib/matplotlib#egg=matplotlib</code></p>

<p>I must say, this is still a mess. But at least, it is getting less bad.</p>
</div> <hr> </div><div class="article-meta"> <a class="article-title" href="http://bastibe.de/posts/Compiling-Scipy-and-Matplotlib-using-pip-on-Lion.html">Compiling Scipy and Matplotlib using pip on Lion</a> <div class="date"> posted on 2011-08-01 12:40</div> <div class="article">

<p>So I upgraded to Lion. Predictably, some things went wrong. This time, the main thing that bit me was that for some reason, <code>pip</code> stopped working. After a bit of messing around with <code>brew</code>, <code>pip</code> and <code>easy_install</code>, I found out it was almost entirely my own fault. I messed up my <code>PATH</code>.</p>

<p>In the meantime, I had uninstalled all of <code>brew</code>'s Python, so I had to reinstall. For me, that entails Python, Numpy, Scipy and Matplotlib. Only this time, Scipy would not build. Some obscure error in some <code>veclib_cabi_c.c</code> would report errors. A quick <a href="http://mail.scipy.org/pipermail/scipy-user/2009-June/021383.html" >round of googling</a> reveals:</p>

<p>In order to get Scipy to compile, you need to insert <code>#include &lt;complex.h&gt;</code> in</p>

<pre><code>./scipy/lib/blas/fblaswrap_veclib_c.c.src
./scipy/linalg/src/fblaswrap_veclib_c.c
./scipy/sparse/linalg/eigen/arpack/ARPACK/FWRAPPERS/veclib_cabi_c.c
</code></pre>

<p>That done, Scipy compiles perfectly fine.</p>

<p>But, that is not enough yet. As <a href="http://jholewinski.wordpress.com/2011/07/21/installing-matplotlib-on-os-x-10-7-with-homebrew/" >this blogpost</a> outlines, Matplotlib is not currently compatible with <code>libpng</code> 1.5, which ships with Lion. Fortunately, this is already fixed in the most recent source on the Matplotlib repo, so you just have to checkout that:</p>

<pre><code>pip install -e git+https://github.com/matplotlib/matplotlib.git#egg=matplotlib
</code></pre>

<p>By doing that, Matplotlib should install just fine.</p>

<p>Seriously though, these PyPi repos are in a very sorry state. Every time I install one of these packages, I have to jump through hoops and spend hours debugging packages that really should work right out of the box. After all, <code>brew</code>, <code>rvm</code> and <code>gem</code> can do it just fine. Why is <code>pip</code> such a horrible mess?</p>
</div> <hr> </div><div class="article-meta"> <a class="article-title" href="http://bastibe.de/posts/Installing-Pygame-using-Homebrew.html">Installing Pygame using Homebrew</a> <div class="date"> posted on 2011-03-04 14:16</div> <div class="article">

<p>So I want to do audio development on the Mac without using Matlab. An alternative to Matlab is Python, or rather, <a href="http://www.daskrachen.com/2011/02/installing-pythonnumpyscipymatplotlib.html" >Numpy, Scipy and Matplotlib</a>. They are awesome for working with audio data. What they don't do however is playing back audio. There are several packages out there that would afford audio playback. If you are serious about this though, you not only want audio playback, you want asynchronous audio playback. That is, you want to send some audio data to the sound card and continue with your program without waiting for the audio to finish playing. This allows continuous audio playback of computer-generated sound.</p>

<p><a href="http://www.pygame.org/news.html" >Pygame</a> is one package that allows this. (I will submit a patch to <a href="http://people.csail.mit.edu/hubert/pyaudio/" >Pyaudio</a> soon that will enable it there, too). There are pre-built binaries on the Pygame website that you can install easily. But then there would be no easy way to uninstall them, so what I would rather want is to install Pygame using package managers that allow easy updating and uninstallation. My tool of choice on the Mac is of course <a href="https://github.com/mxcl/homebrew/" >Homebrew</a>.</p>

<p>Note that although I am mostly interested in audio playback, this post will detail the installation of all modules of Pygame, not just <code>pygame.mixer</code>.</p>

<p>Homebrew won't install Pygame, but it will install all the prerequisites for Pygame. So, let's do that.</p>

<pre><code>brew install sdl, sdl_mixer, sdl_ttf, libpng, jpeg, sdl_image, portmidi
</code></pre>

<p>This will install most packages for you. Note that <code>libpng</code> is also available as a system library, so it is installed <code>keg_only</code>, that is, without linking it in your path. We will need to compile against it though, so the next step is</p>

<pre><code>brew link libpng
</code></pre>

<p>Now there is still one package missing, <code>smpeg</code>. Sadly, <code>smpeg</code> does not install its headers, so you can't compile against it. To fix that, type</p>

<pre><code>brew edit smpeg
</code></pre>

<p>and add the following line just above the two end at the end of the file</p>

<pre><code>include.install Dir[&quot;*.h&quot;]
</code></pre>

<p>Then save the file. (I submitted a bug to have this fixed, so you might not need to do this when you read this). Now you can install <code>smpeg</code> with the usual</p>

<pre><code>brew install smpeg
</code></pre>

<p>and you will get the headers, too. Isn't Homebrew great?</p>

<p>Now that all the prerequisites are met, lets look at Pygame itself. This is rather more difficult, as it will not build properly against Homebrew libraries on its own. First, download the source package of Pygame from the <a href="http://www.pygame.org/download.shtml" >official website</a>. Unpack it to some directory.</p>

<p>Now open a terminal and navigate to that directory. Me, I like <a href="http://iterm.sourceforge.net/" >iTerm</a>, but Terminal.app will do just fine, too. In there, run <code>python config.py</code> to create an initial setup file.</p>

<p>At this point, the setup file is mostly useless since <code>config.py</code> failed to find any homebrew-installed library. It is also strangely garbled, so there is some manual labor to do. Open the file <code>Setup</code> (no extension) in your favourite text editor. After the first comment block, you will see a line that looks like this</p>

<pre><code>SDL = -I/NEED_INC_PATH_FIX -L/NEED_LIB_PATH_FIX -lSDL
</code></pre>

<p>Obviously, this is lacking the paths to the SDL library. If you installed Homebrew to its default directory, this will be in <code>/usr/localâ€¦</code>. Hence, change this line to</p>

<pre><code>SDL = -I/usr/local/include/SDL -L/usr/local/lib -lSDL
</code></pre>

<p>The next lines are strangely garbled. They say, for example</p>

<pre><code>FONT = -lS -lD -lL -l_ -lt -lt -lf
</code></pre>

<p>Where they actually should say</p>

<pre><code>FONT = -lSDL_ttf
</code></pre>

<p>Instead of having one <code>-l</code> and then the library name <code>SDL_ttf</code>, they put <code>-l</code> in front of every single letter of the name. This is strange, and certainly wrong. So, correct it for <code>FONT</code>, <code>IMAGE</code>, <code>MIXER</code> and <code>SMPEG</code>.</p>

<p>Note that I did not tell you to do this for <code>PORTTIME</code>, too. Actually, <code>PORTTIME</code> is already correctly linked in <code>PORTMIDI</code>, so you don't need that at all any more. Just delete or comment the <code>PORTTIME</code> line.</p>

<p>Now that all the dependencies are corrected, lets enable the features. A few lines further down, there will be a block of lines, where most lines begin with a <code>#</code> except for the ones beginning with <code>_numericsurfarrayâ€¦</code> and <code>_cameraâ€¦</code>, These are the different features of Pygame: The ones with the <code>#</code> are disabled, the other two are enabled.</p>

<p>With all the stuff we installed earlier, you can now enable all features (remove the <code>#</code> in front of <code>imageextâ€¦</code>, <code>fontâ€¦</code>, <code>mixerâ€¦</code>, <code>mixer_musicâ€¦</code>, <code>_minericsndarrayâ€¦</code>, <code>movieâ€¦</code>, <code>scrapâ€¦</code> and <code>pypmâ€¦</code>).</p>

<p>Remember we disabled <code>PORTTIME</code> a while ago? Right, so we have to remove that dependency: In the line starting with <code>pypmâ€¦</code>, delete the part that says <code>$(PORTTIME)</code>. Great. That was easy, right? Now save that file and go back to the Terminal.</p>

<p>We are now going to compile and install Pygame. The nice thing is, even though we are installing it manually, it will go in the right directories and it will be registered with <code>pip</code> or <code>easy_install</code>, so you can just invoke them if you want to uninstall it later by typing <code>pip uninstall pygame</code>. This is something I love about Python!</p>

<p>Alright, now without further ado, install Pygame by typing</p>

<pre><code>python setup.py install
</code></pre>

<p>Great! That's it! Everything should work now!</p>
</div> <hr> </div><div class="article-meta"> <a class="article-title" href="http://bastibe.de/posts/Installing-PythonNumpyScipyMatplotlib-on-OSX.html">Installing Python/Numpy/Scipy/Matplotlib on OSX</a> <div class="date"> posted on 2011-02-03 16:23</div> <div class="article">

<p>For numerical analysis and signal processing prototyping, you would use <a href="http://www.mathworks.com/products/matlab/" >Matlab</a>. However, Matlab has some downsides that might make it unsuitable for your project. It might be too expensive. You might be a snobbish programmer that can't stand less-than-elegant programming languages. I certainly am.</p>

<p>So, you look for alternatives. You could take <a href="http://www.gnu.org/software/octave/" >Octave</a>, which is free, but that would not solve that ugly-code issue. You could take any scripting language you fancy, but Ruby, Perl and Python are too slow to do serious number crunching.</p>

<p>Then, you stumble upon that Python package called <a href="http://numpy.scipy.org/" >Numpy</a>, which seems to be nearly as fast as Matlab when it comes to matrix processing and linear algebra. You then discover <a href="http://www.scipy.org/" >SciPy</a>, which would add all that signal processing prowess of Matlab (do quick transformations, random numbers, statistics) to your toolbox. Last but not least, you need plotting. That would be <a href="http://matplotlib.sourceforge.net/" >Matplotlib</a> then, which provides quick plotting facilities in Python.</p>

<p>And the best thing is, these three systems work really well together. They seem to be the perfect replacement for Matlab that could even be superiour to it in many regards.</p>

<p>Next up, you need to install all that stuff. If you are like me, you naturally want to do all that on a Mac. Also, you kind of dislike all these installer-thingies, which install stuff to unknown places and are nigh impossible to uninstall or update cleanly. Even though, you could of course just go to the individual websites, download Python, Numpy, SciPy and Matplotlib, run them installers, and be done. You would save yourself a lot of trouble that way.</p>

<p>But since you allegedly are like me, you instead fire up <a href="http://mxcl.github.com/homebrew" ><code>brew</code></a> and try to install all that stuff using that. Again, you could use <a href="http://www.macports.org/" >MacPorts</a> or <a href="http://www.finkproject.org/" >Fink</a> instead, but you probably had some bad experiences with them and you generally love the hackishness of Homebrew, so this is your natural first try.</p>

<p>So you set about this, you believe in packet managers and trust them to take care of every obstacle that might be lying in your way. First of all, install the latest developer tools from <a href="http://developer.apple.com/" >developer.apple.com</a>. You might need to register (for free) to get them. Also, you need to install <a href="http://mxcl.github.com/homebrew" >Homebrew</a>.</p>

<p>To cut this short, here is what you need to get that Python running:</p>

<pre><code>brew install python
</code></pre>

<p>This one should be obvious. At the time of writing, it will install Python 2.7.1. You could take Python 3, but matplotlib is not compatible to it, so you kind of have to stick with 2.7.1 instead.</p>

<p>You also need to put <code>/usr/local/bin</code> and <code>/usr/local/sbin</code> in the beginning of your path to make sure the new Python gets loaded instead of the pre-installed one. You do that by writing</p>

<pre><code>export PATH=/usr/local/bin:/usr/local/sbin:$PATH
</code></pre>

<p>in your <code>~/.bash_profile</code>. (Create it if its not there--it is just a simple text file).</p>

<p>Now, if you type <code>python --version</code>, you should get <code>Python 2.7.1</code> as a response.</p>

<p>Alright, next up, install the python package manager:</p>

<pre><code>brew install distribute
brew install pip
</code></pre>

<p>This will come preconfigured for your newly installed Python. In an ideal world, this should be all. The world being as it is, the pip package of Matplotlib is severely broken and has one other unstated dependency:</p>

<pre><code>brew install pkg-config
</code></pre>

<p>Also, SciPy is using some FORTRAN sources, so you need a fortran compiler:</p>

<pre><code>brew install gfortran
</code></pre>

<p>Alright. That was enough. Now on to pip. With all these dependencies cleared, pip should be able to download Numpy and Scipy without trouble:</p>

<pre><code>pip install numpy
pip install scipy
</code></pre>

<p>Matplotlib, on the other hand, is more difficult to install. You see, pip is looking at the Python package repository <a href="http://pypi.python.org/" >PyPi</a> for each package. PyPi then provides a URL. Pip then scans that website for links to suitable package files. But, <a href="http://sourceforge.net/" >Sourceforge</a> changed its links a while ago, so pip gets confused and will download an outdated version. Sourceforge says, its new links are way better and no way we will change them back; Pip says, well, if Sourceforge can't provide proper links, that's not our problem. Oh My. Silly children.</p>

<p>So we have to do this manually:</p>

<pre><code>pip install -f http://sourceforge.net/projects/matplotlib/files/matplotlib/matplotlib-1.0.1/matplotlib-1.0.1.tar.gz matplotlib
</code></pre>

<p>That URL comes straight from Sourceforge. Look for the latest version of Matplotlib, search for the download link to the source distribution (<code>*.tar.gz</code>), copy that link and strip any trailing '/download'.</p>

<p>UPDATE:</p>

<p>It seems the matplotlib package was updated in the meantime, so you can just run <code>pip install matplotlib</code> now.</p>

<p>This should now download and install matplotlib.</p>

<p>Thank you for reading.</p>
</div> <hr> </div><div class="article-meta"> <a class="article-title" href="http://bastibe.de/posts/Debugging-und-GCC-auf-Windows.html">Debugging und GCC auf Windows</a> <div class="date"> posted on 2009-03-15 15:10</div> <div class="article">

<p><img src="http://bastibe.de/static/2009-03/code.png" alt="Code" /></p>

<p>So, jetzt habe ich mein Mex-File zum Einlesen beliebiger Audiodateien endlich lauffÃ¤hig auf Windows und Mac. Leider werde ich nicht dafÃ¼r bezahlt, auch noch eine Linux-Version zu bauen, aber falls Interesse besteht, versuche ich mich vielleicht einmal daran.</p>

<p><a href="http://en.wikipedia.org/wiki/State_of_the_Union" >The State of The Union</a>: Kleine Dateien einlesen, kein Problem. Exotische Formate einlesen, kein Problem. Metadaten auslesen, kein Problem. DateigrÃ¶ÃŸe, Bitrate und Samplerate auslesen, ein kleines Problem, da diese Parameter bei komprimierten Formaten nicht unbedingt fest stehen. GroÃŸe Dateien einlÃ¶sen, auf dem Mac kein Problem, auf Windowsâ€¦ nun ja, es dauert. Eine WAV-Datei von 5:30 min einzulesen, dauert mit Windows momentan ca. eine Stunde. Das kann nicht sein, in der Zeit habe ich die Datei dem Programm vorgelesen, wenn es sein muss.</p>

<p>Also, was ist da faul? Jetzt heiÃŸt es debuggen: <a href="http://de.wikipedia.org/wiki/GNU_Debugger" >GDB</a> ist mein Freund, aber leider spreche ich seine Sprache nicht, also Oldschool-Debugging mit <a href="http://www.cplusplus.com/reference/clibrary/cstdio/printf.html" >printf()</a> (bzw. <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/index.html?/access/helpdesk/help/techdoc/apiref/mexprintf.html" >mexPrintf()</a>; Aber da <code>#define printf mexPrintf</code> ist das das selbe). BlÃ¶d nur, dass Matlab selbst entscheidet, wann es meine Printfs auf den Bildschirm schreibt und es sich dazu entschlossen hat, dies immer erst nach dem AusfÃ¼hren der Datei, also erst nachdem es bereits eine Stunde gearbeitet hat, zu tun. Einiges Hirnen spÃ¤ter konnte ich Matlab endlich Ã¼ber eine Kombination aus <a href="http://de.wikipedia.org/wiki/Typumwandlung" >Typecasts</a>, <a href="http://www.cplusplus.com/reference/clibrary/cstdio/sprintf.html" >sprintf</a> und <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/index.html?/access/helpdesk/help/techdoc/apiref/mexwarnmsgtxt.html" >mexWarnMsgTxt</a> dazu Ã¼berreden, wenigstens sporadisch ein paar Informationen herauszugeben.</p>

<p>Das Ergebnis:</p>

<ol>
<li>Die Datei funktioniert tadellos, ist nur ein wenig langsam (s.o.)</li>
<li>Wer ist schuld? <a href="http://www.cplusplus.com/reference/clibrary/cstdlib/realloc.html" >Realloc</a> ist schuld!</li>
</ol>

<p>Das kam Ã¼berraschend! Offenbar ist realloc auf dem Mac um mehrere GrÃ¶ÃŸenordnungen performanter als auf <a href="http://www.mingw.org/" >MinGW</a>/Windows, denn die selbe Anwendung, die auf dem Mac ca. eine Sekunde braucht, braucht auf Windows eine Stunde! Und das allein wegen realloc! (Eigentlich: eine halbe Stunde wegen realloc, der Rest ist der Tatsache geschuldet, dass Windows in einer <a href="http://www.vmware.com/de/products/fusion/" >VM</a> lÃ¤uft)</p>

<p>Bei WAV-Dateien werden immer 2048 Samples an einem StÃ¼ck ausgelesen. Danach verwende ich ein realloc, um meinen haupt-Speicherpuffer um diese GrÃ¶ÃŸe zu vergrÃ¶ÃŸern und kopiere die neuen Daten dort hinein. Bei meinen 5:30 min macht das bei einer Samplerate von 44100 kHz und zwei KanÃ¤len ca. 15000 Aufrufe von realloc. Komprimierte Datenformate haben Ã¼blicherweise kleinere Frames und damit noch einmal wesentlich mehr realloc-Aufrufe.
Der Plan ist also, jetzt statt hÃ¤ufiger, kleiner realloc-Aufrufe, seltenere, grÃ¶ÃŸere Aufrufe zu machen. Zeit fÃ¼r ein paar Experimente:</p>

<pre><code>realloc()-GrÃ¶ÃŸe   realloc()-Aufrufe   benÃ¶tigte Zeit
2^11 = 2048       15000               ~1 h
2^16 = 65536      470                 ~2 min
2^17 = 131072     240                 ~1 min
2^18 = 262144     120                 30 s
2^19 = 524288     60                  18 s
2^20 = 1048576    30                  10.5 s
2^21 = 2097152    15                  7.3 s
2^22 = 4194304    7                   5.1 s
2^23 = 8388608    3                   4.2 s
</code></pre>

<p>Das Spannende ist: Ich Ã¤ndere durch meine Methodik praktisch nichts auÃŸer der Anzahl und GrÃ¶ÃŸe der realloc-Aufrufe, aber man erkennt einen eindeutigen Zusammenhang zwischen Performance und Anzahl der Aufrufe, ergo ist realloc der alleinige Schuldige fÃ¼r mein Performanceproblem auf Windows.</p>

<p>An dieser Stelle fiel mir ein, dass ich bereits an frÃ¼herer Stelle einmal die gesamte LÃ¤nge des Audio-Streams anhand der Metadaten geschÃ¤tzt hatte. Durch eine somit vorgenommene PrÃ¤-Allokation des gesamten Speichers lÃ¤sst sie die Laufzeit weiter auf 2.2 s drÃ¼cken. Das ist immernoch nicht einmal halb so schnell wie auf OSX (0.9 s), aber das mag auch an der virtuellen Maschine liegen.</p>

<p>Mehr als diesen anecdotal Evidence kann ich nicht anbieten, aber ich bin mir sicher, dass ich ab jetzt die Finger von inkrementiellen SpeichervergrÃ¶ÃŸerungen auf MinGW/Windows lassen werde. Ist das in MSVC Ã¤hnlich schlimm, oder habe ich da etwa einen Bug entdeckt?</p>
</div> <hr> </div><div class="article-meta"> <a class="article-title" href="http://bastibe.de/posts/Kompilieren-auf-Windows.html">Kompilieren auf Windows</a> <div class="date"> posted on 2009-03-12 17:14</div> <div class="article">

<p><img src="http://bastibe.de/static/2009-03/open_source_rules.png" alt="Open Source Rules!" /></p>

<p>Seit einigen Wochen arbeite ich an einem kleinen Projekt: Eine Matlab-Funktion, die, Ã¤hnlich wie die standard-Funktion <a href="http://www.mathworks.com/access/helpdesk_r13/help/techdoc/ref/wavread.html" >wavread()</a>, Audiodateien einlesen kann. Aber nicht irgendwelche Audiofiles, sondern ALLE MÃ–GLICHEN Audiofiles. Wie geht das? Jeder kennt <a href="http://www.videolan.org/vlc/" >VLC</a>, den Video-Player, der so ziemlich jedes Video Ã¶ffnen kann, das man ihm vorsetzt, selbst wenn man Ã¼berhaupt keine Codecs installiert hat. VLC basiert auf <a href="http://de.wikipedia.org/wiki/FFmpeg" >FFmpeg</a>, einem Open-Source Programm, welches Funktionen bereit stellt, um eben alle mÃ¶glichen Mediendaten zu Ã¶ffnen.</p>

<p>Und da FFmpeg freie Software ist, kann man sie auch fÃ¼r andere Dinge verwenden, etwa, um mit Matlab Audiodateien zu Ã¶ffnen. Fehlt noch eine Verbindung zwischen Matlab und den FFmpeg-C-Bibliotheken, und die gibt es in Form von <a href="http://www.mathworks.com/support/tech-notes/1600/1605.html#intro" >Mex</a>, der C-Schnittstelle von Matlab. Feine Sache, zwar hat es eine Weile gedauert, bis ich mich in libavformat und libavcodec eingearbeitet hatte (die beiden wichtigsten FFmpeg-Bibliotheken), aber im Endeffekt lief das alles sehr schmerzfrei -- und das, obwohl ich bisher Mex-Kompilieren mit Matlab immer als eine grausige BeschÃ¤ftigung in Erinnerung hatte, gespickt von kryptischen Kompiler-Fehlern und hÃ¤sslichen NotlÃ¶sungen.</p>

<p>Bumms, Zack, kaum hatte ich mich versehen, hatte ich ein lauffÃ¤higes, tadellos funktionierendes <a href="http://en.wikipedia.org/wiki/MATLAB#Calling_C_and_Fortran_functions" >Mex-File</a> auf meinem Mac liegen. Damit hatte ich nicht gerechnet. Also sofort die momentane Euphorie ausnutzen und weiter zu Schritt 2, das Ganze nochmal auf Windows. Meine Probleme, Windows so einzurichten, dass ich endlich Kompilieren kann, <a href="http://www.daskrachen.com/2009/03/great-scott.html" >hatte ich ja schon berichtet</a>. Ich hatte also Visual Studio 2005 installiert, um Matlab zufrieden zu stellen und einen anstÃ¤ndigen Kompiler auf dem System zu haben. Aber war ja klar, MSVC macht wieder sein eigenes Ding und nichts ist mit StandardkonformitÃ¤t und Trallalla: Keine <a href="http://de.wikipedia.org/wiki/C99#C99" >C99</a>-UnterstÃ¼tzung, also keine Variablendeklarationen mitten im Code und keine stdint.h oder inttype.h. Ein GlÃ¼ck, es gibt wieder ein wenig mehr Free Software, die wenigstens <a href="http://code.google.com/p/msinttypes/" >letztere LÃ¼cke schlieÃŸt</a>. Dennoch; Ich bekomme mein mex-File nicht zum Laufen. Es ist wie verflucht, kaum setze ich mich an eine Windows-Maschine zum Programmieren, fÃ¤llt meine ProduktivitÃ¤t auf das Niveau eines Backsteins.</p>

<p>Enter <a href="http://sourceforge.net/projects/gnumex" >gnumex</a>, noch ein weiteres StÃ¼ck FOSS, das es ermÃ¶glicht, GCC als Mex-Kompiler zu verwenden, AUF WINDOWS. Um die Dinge zu vereinfachen, verwendete ich die <a href="http://www.mingw.org/" >MinGW</a>-Variante und kaum war diese HÃ¼rde genommen... lief alles. Einfach so. Wahrscheinlich bin ich ein DickschÃ¤del und habe einfach nicht die GeistesschÃ¤rfe, mit Windows-Kompilern zu arbeiten, aber mir scheint, alles was ich diesbezÃ¼glich anfasse und das nicht GCC heiÃŸt ist zum Scheitern verurteilt. Ein GlÃ¼ck, dass es die vielen klugen Jungen und MÃ¤dchen gibt, die so wunderbare freie Software schreiben, die mir das Leben so viel einfacher macht!</p>

<p>Eine Fortsetzung kommt noch...</p>
</div> <hr> </div> <div id="relative-nav">   </div> <div id="tagsoup"> <p>This blog covers <a href="http://bastibe.de/tag/apple.html">apple</a>, <a href="http://bastibe.de/tag/apple-tv.html">apple-tv</a>, <a href="http://bastibe.de/tag/blog.html">blog</a>, <a href="http://bastibe.de/tag/codehilite.html">codehilite</a>, <a href="http://bastibe.de/tag/compiling.html">compiling</a>, <a href="http://bastibe.de/tag/computers.html">computers</a>, <a href="http://bastibe.de/tag/cython.html">cython</a>, <a href="http://bastibe.de/tag/emacs.html">emacs</a>, <a href="http://bastibe.de/tag/error.html">error</a>, <a href="http://bastibe.de/tag/file-system.html">file-system</a>, <a href="http://bastibe.de/tag/gaming.html">gaming</a>, <a href="http://bastibe.de/tag/gem.html">gem</a>, <a href="http://bastibe.de/tag/homebrew.html">homebrew</a>, <a href="http://bastibe.de/tag/matlab.html">matlab</a>, <a href="http://bastibe.de/tag/matplitlib.html">matplitlib</a>, <a href="http://bastibe.de/tag/matplotlib.html">matplotlib</a>, <a href="http://bastibe.de/tag/mountainlion.html">mountainlion</a>, <a href="http://bastibe.de/tag/numpy.html">numpy</a>, <a href="http://bastibe.de/tag/open-source.html">open-source</a>, <a href="http://bastibe.de/tag/pelican.html">pelican</a>, <a href="http://bastibe.de/tag/philosophy.html">philosophy</a>, <a href="http://bastibe.de/tag/pip.html">pip</a>, <a href="http://bastibe.de/tag/programming.html">programming</a>, <a href="http://bastibe.de/tag/pyaudio.html">pyaudio</a>, <a href="http://bastibe.de/tag/pygame.html">pygame</a>, <a href="http://bastibe.de/tag/pygments.html">pygments</a>, <a href="http://bastibe.de/tag/python.html">python</a>, <a href="http://bastibe.de/tag/raspberrypi.html">raspberrypi</a>, <a href="http://bastibe.de/tag/scheme.html">scheme</a>, <a href="http://bastibe.de/tag/scipy.html">scipy</a>, <a href="http://bastibe.de/tag/solarized.html">solarized</a>, <a href="http://bastibe.de/tag/sublime-text.html">sublime-text</a>, <a href="http://bastibe.de/tag/text-editor.html">text-editor</a>, <a href="http://bastibe.de/tag/ui.html">ui</a>, <a href="http://bastibe.de/tag/vim.html">vim</a> </div> <div id="monthsoup"> <p>View posts from <a href="http://bastibe.de/date/2013-05.html">2013-05</a>, <a href="http://bastibe.de/date/2013-01.html">2013-01</a>, <a href="http://bastibe.de/date/2012-11.html">2012-11</a>, <a href="http://bastibe.de/date/2012-10.html">2012-10</a>, <a href="http://bastibe.de/date/2012-09.html">2012-09</a>, <a href="http://bastibe.de/date/2012-08.html">2012-08</a>, <a href="http://bastibe.de/date/2012-07.html">2012-07</a>, <a href="http://bastibe.de/date/2012-02.html">2012-02</a>, <a href="http://bastibe.de/date/2011-12.html">2011-12</a>, <a href="http://bastibe.de/date/2011-10.html">2011-10</a>, <a href="http://bastibe.de/date/2011-09.html">2011-09</a>, <a href="http://bastibe.de/date/2011-08.html">2011-08</a>, <a href="http://bastibe.de/date/2011-03.html">2011-03</a>, <a href="http://bastibe.de/date/2011-02.html">2011-02</a>, <a href="http://bastibe.de/date/2010-07.html">2010-07</a>, <a href="http://bastibe.de/date/2009-04.html">2009-04</a>, <a href="http://bastibe.de/date/2009-03.html">2009-03</a> </div> </div>  <div class="fineprint"> <hr> Unless otherwise credited all material <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"> <img alt="Creative Commons License" style="border-width:0" src="http://bastibe.de/css/cc-by-sa.png" /> </a> by Bastian Bechtold <img align="right" src="http://bastibe.de/css/logo_small.jpg" /> </div> </body> </html>
