<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Bastis Scratchpad On The Internet</title>
    <meta name="description" content="">
    <meta name="author" content="Bastian Bechtold">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src=".././theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href=".././theme/bootstrap.min.css" rel="stylesheet">
    <link href=".././theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href=".././theme/local.css" rel="stylesheet">
    <link href=".././theme/pygments.css" rel="stylesheet">

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
    <div class="container">

         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
         </a>

        <a class="brand" href="../.">Bastis Scratchpad On The Internet</a>

        <div class="nav-collapse">
        <ul class="nav">
        
            
        
        
        
        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
                


        




    <div class='article'>
        <div class="content-title">
            <a href=".././matlab-mex-homebrew-and-os-x-108-mountain-lion.html"><h1>Matlab, Mex, Homebrew and OS X 10.8 Mountain Lion</h1></a>
            20/10/2012


by <a class="url fn" href=".././author/bastian-bechtold.html">Bastian Bechtold</a>
 



 
        </div>
        
        <div><p>Now that I am a student again, I have to use Matlab again. Among the many joys of Matlab is the compilation of mex files.</p>
<p>Because it does not work. So angry.</p>
<p>Basically, <code>mex</code> does not work because it assumes that you have OS X 10.6 installed. In OS X 10.6 you had <code>gcc-4.2</code> and your system SDK was stored in <em>/Developer/SDKs/MacOSX10.6.sdk</em>. However, as of 10.7 (I think), the <em>/Developer</em> directory has been deprecated in favor of distributing the whole development environment within the App package of XCode. Also, <code>gcc</code> has been deprecated in favor of <code>clang</code>. While a <code>gcc</code> binary is still provided, <code>gcc-4.2</code> is not. Of course, that is what <code>mex</code> relies on. Lastly, <code>mex</code> of course completely disregards common system paths such as, say, <em>/usr/local/bin</em>, so compiling against some homebrew library won't work.</p>
<p>At least these things are rather easy to fix, since all these settings are saved in a file called <em>mexopts.sh</em>, which is saved to <em>~/.matlab/R2012a/</em> by default. The relevant section on 64-bit OS X begins after <code>maci64)</code> and should look like this: (changes are marked by comments)</p>
<div class="codehilite"><pre><span class="c">#----------------------------------------------------------------------------</span>
            <span class="c"># StorageVersion: 1.0</span>
            <span class="c"># CkeyName: GNU C</span>
            <span class="c"># CkeyManufacturer: GNU</span>
            <span class="c"># CkeyLanguage: C</span>
            <span class="c"># CkeyVersion:</span>
            <span class="nv">CC</span><span class="o">=</span><span class="s1">&#39;gcc&#39;</span> <span class="c"># used to be &#39;gcc-4.2&#39;</span>

            <span class="c"># used to be &#39;/Developer/SDKs/MacOSX10.6.sdk&#39;</span>
            <span class="nv">SDKROOT</span><span class="o">=</span><span class="s1">&#39;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk&#39;</span> 
            <span class="nv">MACOSX_DEPLOYMENT_TARGET</span><span class="o">=</span><span class="s1">&#39;10.8&#39;</span> <span class="c"># used to be &#39;10.5&#39;</span>
            <span class="nv">ARCHS</span><span class="o">=</span><span class="s1">&#39;x86_64&#39;</span>
            <span class="nv">CFLAGS</span><span class="o">=</span><span class="s2">&quot;-fno-common -no-cpp-precomp -arch $ARCHS -isysroot $SDKROOT -mmacosx-version-min=$MACOSX_DEPLOYMENT_TARGET&quot;</span>
            <span class="nv">CFLAGS</span><span class="o">=</span><span class="s2">&quot;$CFLAGS  -fexceptions&quot;</span>
            <span class="nv">CFLAGS</span><span class="o">=</span><span class="s2">&quot;$CFLAGS -I/usr/local/include&quot;</span> <span class="c"># Homebrew include path</span>
            <span class="nv">CLIBS</span><span class="o">=</span><span class="s2">&quot;$MLIBS&quot;</span>
            <span class="nv">COPTIMFLAGS</span><span class="o">=</span><span class="s1">&#39;-O2 -DNDEBUG&#39;</span>
            <span class="nv">CDEBUGFLAGS</span><span class="o">=</span><span class="s1">&#39;-g&#39;</span>
<span class="c">#</span>
            <span class="nv">CLIBS</span><span class="o">=</span><span class="s2">&quot;$CLIBS -lstdc++&quot;</span>
            <span class="c"># C++keyName: GNU C++</span>
            <span class="c"># C++keyManufacturer: GNU</span>
            <span class="c"># C++keyLanguage: C++</span>
            <span class="c"># C++keyVersion:</span>
            <span class="nv">CXX</span><span class="o">=</span>g++ <span class="c"># used to be &#39;g++-4.2&#39;</span>
            <span class="nv">CXXFLAGS</span><span class="o">=</span><span class="s2">&quot;-fno-common -no-cpp-precomp -fexceptions -arch $ARCHS -isysroot $SDKROOT -mmacosx-version-min=$MACOSX_DEPLOYMENT_TARGET&quot;</span>
            <span class="nv">CXXLIBS</span><span class="o">=</span><span class="s2">&quot;$MLIBS -lstdc++&quot;</span>
            <span class="nv">CXXOPTIMFLAGS</span><span class="o">=</span><span class="s1">&#39;-O2 -DNDEBUG&#39;</span>
            <span class="nv">CXXDEBUGFLAGS</span><span class="o">=</span><span class="s1">&#39;-g&#39;</span>
<span class="c">#</span>
            <span class="c"># FortrankeyName: GNU Fortran</span>
            <span class="c"># FortrankeyManufacturer: GNU</span>
            <span class="c"># FortrankeyLanguage: Fortran</span>
            <span class="c"># FortrankeyVersion:</span>
            <span class="nv">FC</span><span class="o">=</span><span class="s1">&#39;gfortran&#39;</span>
            <span class="nv">FFLAGS</span><span class="o">=</span><span class="s1">&#39;-fexceptions -m64 -fbackslash&#39;</span>
            <span class="nv">FC_LIBDIR</span><span class="o">=</span><span class="sb">`</span><span class="nv">$FC</span> -print-file-name<span class="o">=</span>libgfortran.dylib 2&gt;&amp;1 | sed -n <span class="s1">&#39;1s/\/*libgfortran\.dylib//p&#39;</span><span class="sb">`</span>
            <span class="nv">FC_LIBDIR2</span><span class="o">=</span><span class="sb">`</span><span class="nv">$FC</span> -print-file-name<span class="o">=</span>libgfortranbegin.a 2&gt;&amp;1 | sed -n <span class="s1">&#39;1s/\/*libgfortranbegin\.a//p&#39;</span><span class="sb">`</span>
            <span class="nv">FLIBS</span><span class="o">=</span><span class="s2">&quot;$MLIBS -L$FC_LIBDIR -lgfortran -L$FC_LIBDIR2 -lgfortranbegin&quot;</span>
            <span class="nv">FOPTIMFLAGS</span><span class="o">=</span><span class="s1">&#39;-O&#39;</span>
            <span class="nv">FDEBUGFLAGS</span><span class="o">=</span><span class="s1">&#39;-g&#39;</span>
<span class="c">#</span>
            <span class="nv">LD</span><span class="o">=</span><span class="s2">&quot;$CC&quot;</span>
            <span class="nv">LDEXTENSION</span><span class="o">=</span><span class="s1">&#39;.mexmaci64&#39;</span>
            <span class="nv">LDFLAGS</span><span class="o">=</span><span class="s2">&quot;-Wl,-twolevel_namespace -undefined error -arch $ARCHS -Wl,-syslibroot,$SDKROOT -mmacosx-version-min=$MACOSX_DEPLOYMENT_TARGET&quot;</span>
            <span class="nv">LDFLAGS</span><span class="o">=</span><span class="s2">&quot;$LDFLAGS -bundle -Wl,-exported_symbols_list,$TMW_ROOT/extern/lib/$Arch/$MAPFILE&quot;</span>
            <span class="nv">LDFLAGS</span><span class="o">=</span><span class="s2">&quot;$LDFLAGS -L/usr/local/lib&quot;</span> <span class="c"># Homebrew library path</span>
            <span class="nv">LDOPTIMFLAGS</span><span class="o">=</span><span class="s1">&#39;-O&#39;</span>
            <span class="nv">LDDEBUGFLAGS</span><span class="o">=</span><span class="s1">&#39;-g&#39;</span>
<span class="c">#</span>
            <span class="nv">POSTLINK_CMDS</span><span class="o">=</span><span class="s1">&#39;:&#39;</span>
<span class="c">#----------------------------------------------------------------------------</span>
</pre></div>


<p>To summarize:</p>
<ul>
<li>changed <code>gcc-4.2</code> to <code>gcc</code></li>
<li>changed <code>/Developer/SDKs/MacOSX10.6.sdk</code> to <code>/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk</code></li>
<li>changed <code>10.5</code> to <code>10.8</code></li>
<li>added <code>CFLAGS="$CFLAGS -I/usr/local/include"</code></li>
<li>changed <code>g++-4.2</code> to <code>g++</code></li>
<li>added <code>LDFLAGS="$LDFLAGS -L/usr/local/lib"</code></li>
</ul>
<p>With those settings, the mex compiler should work and it should pick up any libraries installed by homebrew.</p></div>
        <hr />
    </div>
		
    


 

        


 

    <div class='article'>
        <a href=".././my-emacs-customizations.html"><h2>My Emacs customizations</h2></a>
        <div class= "well small"> 14/10/2012


by <a class="url fn" href=".././author/bastian-bechtold.html">Bastian Bechtold</a>
 



 </div>
        <div class="summary"><p>I don't host my <code>.emacs</code> in a repository. I tried it for a while, but it did not work for me. I think repos are great for managing multiple divergent versions of the same source tree. However, my dotfiles should never diverge, they should just be kept in sync. This is what Dropbox is great at. So I use Dropbox instead of git.</p>
<p>One downside of that is that it is not as easy to provide a public link to my dotfiles. Or maybe it is. Here goes</p>
<p><a href="https://dl.dropbox.com/s/0ne31wkur81wgzb/.emacs">My <em>.emacs</em></a></p>
<p>Now on to the meat of this post: Some ...</p> <a class="btn btn-info xsmall" href=".././my-emacs-customizations.html">read more</a></div>
    </div>	
				
    

 

        


 

    <div class='article'>
        <a href=".././text-editing-with-confidence-and-emacs.html"><h2>Text editing with confidence and Emacs</h2></a>
        <div class= "well small"> 13/10/2012


by <a class="url fn" href=".././author/bastian-bechtold.html">Bastian Bechtold</a>
 



 </div>
        <div class="summary"><p>In college, I realized for the first time how a good text editor could save me serious time, when I dragged an image file into Textmate and it auto-inserted all the LaTeX boilerplate for a figure. A few years later, on my first job, I learned <a href="http://www.viemu.com/">Vim key bindings for Visual Studio</a> because I hated text editing in Visual Studio so much. This showed me another way how a good text editor could save me serious time. A year after that, I was bored and tried Emacs. With Emacs, I discovered the marvelous world of <a href="https://en.wikipedia.org/wiki/REPL">REPLs</a> and <a href="http://orgmode.org/">outlining</a>.</p>
<p>Note that ...</p> <a class="btn btn-info xsmall" href=".././text-editing-with-confidence-and-emacs.html">read more</a></div>
    </div>	
				
    

 

        


 

    <div class='article'>
        <a href=".././a-story-about-schemes.html"><h2>A Story about Schemes</h2></a>
        <div class= "well small"> 20/09/2012


by <a class="url fn" href=".././author/bastian-bechtold.html">Bastian Bechtold</a>
 



 </div>
        <div class="summary"><p><strong>Disclaimer:</strong> If you are a programmer, or wanting to be a programmer, or interested in programming, or, well, reading this, you should absolutely, positively watch the 1986 MIT lecture about <a href="http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-001-structure-and-interpretation-of-computer-programs-spring-2005/">The Structure and Interpretation of Computer Programs</a>. (Most conveniently available <a href="http://ia600401.us.archive.org/8/items/MIT_Structure_of_Computer_Programs_1986/">here</a>)</p>
<p>I tried reading <a href="http://mitpress.mit.edu/sicp/full-text/book/book.html">the book</a> numerous times, but it was too dry for my taste. The lecture however is juicy, brain-bending bliss. Especially if you don't know much functional programming yet. It certainly blew my mind. Frequently. Like, every ten minutes. Basically, I feel reborn as a programmer, with a new sense of what I am doing and ...</p> <a class="btn btn-info xsmall" href=".././a-story-about-schemes.html">read more</a></div>
    </div>	
				
    

 

        


 

    <div class='article'>
        <a href=".././kindleapp-not-starting-on-a-case-sensitive-file-system.html"><h2>Kindle.app not starting on a case-sensitive file system</h2></a>
        <div class= "well small"> 13/09/2012


by <a class="url fn" href=".././author/bastian-bechtold.html">Bastian Bechtold</a>
 



 </div>
        <div class="summary"><p>So Kindle.app was updated through the App Store and did not start any more. It just crashed and the crash reporter came up.</p>
<p>A quick look at Console.app turns up a link to the actual crash report. And the crash report starts with</p>
<div class="codehilite"><pre><span class="n">Dyld</span> <span class="n">Error</span> <span class="n">Message</span><span class="p">:</span>
  <span class="n">Library</span> <span class="n">not</span> <span class="n">loaded</span><span class="p">:</span> <span class="p">@</span><span class="n">executable_path</span><span class="o">/</span><span class="p">.</span><span class="o">./</span><span class="n">Frameworks</span><span class="o">/</span><span class="n">libWEbCoreKRF</span><span class="p">.</span><span class="n">dylib</span>
  <span class="n">Referenced</span> <span class="n">from</span><span class="p">:</span> <span class="o">/</span><span class="n">Applications</span><span class="o">/</span><span class="n">Kindle</span><span class="p">.</span><span class="n">app</span><span class="o">/</span><span class="n">Contents</span><span class="o">/</span><span class="n">Frameworks</span><span class="o">/</span><span class="n">libWebCoreViewer</span><span class="p">.</span><span class="n">dylib</span>
  <span class="n">Reason</span><span class="p">:</span> <span class="n">image</span> <span class="n">not</span> <span class="n">found</span>
</pre></div>


<p><code>libWEbCoreKRF.dylib</code>? With a capitalized <code>E</code>? That looks very much like a spelling error. So, point your terminal to <code>/Applications/Kindle.app/Contents/Frameworks/</code>, type</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="n">libWebCoreKRF</span><span class="p">.</span><span class="n">dylib</span> <span class="n">libWEbCoreKRF</span><span class="p">.</span><span class="n">dylib ...</span></pre></div> <a class="btn btn-info xsmall" href=".././kindleapp-not-starting-on-a-case-sensitive-file-system.html">read more</a></div>
    </div>	
				
    

 

        


 

    <div class='article'>
        <a href=".././on-the-virtue-of-contributing-to-and-using-open-source-software.html"><h2>On the Virtue of Contributing to and Using Open Source Software</h2></a>
        <div class= "well small"> 08/09/2012


by <a class="url fn" href=".././author/bastian-bechtold.html">Bastian Bechtold</a>
 



 </div>
        <div class="summary"><p>I am a mostly self-taught programmer. Apart from a few programming side jobs at the university, I have been programming professionally for the last two and a half years.</p>
<p>About two years ago, we wanted to buy a Matlab license for our company. However, our investors declined for dubious reasons. So I started looking for alternatives. Inspired by a good friend (thank you, Marc), I looked into Python. Python has this brilliant environment for <a href="http://numpy.scipy.org/" title="NumPy">numerical</a> <a href="http://scipy.org/" title="SciPy">computation</a> and <a href="http://matplotlib.sourceforge.net/" title="matplotlib">plotting</a> that, for my particular purposes, rivals Matlab.</p>
<p>However, just like Matlab, Python lacked a way of playing real time audio out of ...</p> <a class="btn btn-info xsmall" href=".././on-the-virtue-of-contributing-to-and-using-open-source-software.html">read more</a></div>
    </div>	
				
    

 

        


 

    <div class='article'>
        <a href=".././fixing-errors-in-epydoc.html"><h2>Fixing Errors in Epydoc</h2></a>
        <div class= "well small"> 28/08/2012


by <a class="url fn" href=".././author/bastian-bechtold.html">Bastian Bechtold</a>
 



 </div>
        <div class="summary"><p>I ran into this error twice now and wasted an hour both times, so it is time to put this on my universal scratchpad, i.e. this blog.</p>
<p>If you ever get this error when using <a href="http://epydoc.sourceforge.net/">epydoc</a>:</p>
<div class="codehilite"><pre><span class="n">UNEXPECTED</span> <span class="n">ERROR</span><span class="p">:</span>
<span class="s">&#39;Text&#39;</span> <span class="n">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s">&#39;data&#39;</span>
</pre></div>


<p>You are probably running a version of Python that is greater than the latest one that is supported by epydoc. This is because epydoc has not been updated since 2008 and Python 2.5.</p>
<p>Luckily, some <a href="http://www.agapow.net/programming/python/epydoc-go-boom">fine</a> <a href="http://stackoverflow.com/questions/6704770/epydoc-attributeerror-text-object-has-no-attribute-data">folks</a> on the internet have figured out how to fix these things.</p>
<p>Short answer: Find your <em>site-packages</em> directory ...</p> <a class="btn btn-info xsmall" href=".././fixing-errors-in-epydoc.html">read more</a></div>
    </div>	
				
    

 

        


 

    <div class='article'>
        <a href=".././using-a-raspberry-pi-as-a-time-capsule-for-mountain-lion.html"><h2>Using a Raspberry Pi as a Time Capsule for Mountain Lion</h2></a>
        <div class= "well small"> 29/07/2012


by <a class="url fn" href=".././author/bastian-bechtold.html">Bastian Bechtold</a>
 



 </div>
        <div class="summary"><p>A while ago, I bought a Time Capsule to take care of my backups. I can't say it has been smooth sailing. Every now and then, the Time Capsule would claim that the backup did fail. Sometimes a reboot would help, sometimes not. Sometimes <code>hdiutil</code> would be able to salvage the backups, sometimes not. Sometimes, the backup disk image would simply be corrupted and the only option would be to delete it and start over.</p>
<p>This might be bad luck or it might be due to a defective Time Capsule or it might be due to my computer. I ...</p> <a class="btn btn-info xsmall" href=".././using-a-raspberry-pi-as-a-time-capsule-for-mountain-lion.html">read more</a></div>
    </div>	
				
    

 

        


 

    <div class='article'>
        <a href=".././how-apple-is-failing-me.html"><h2>How Apple is Failing Me</h2></a>
        <div class= "well small"> 19/07/2012


by <a class="url fn" href=".././author/bastian-bechtold.html">Bastian Bechtold</a>
 



 </div>
        <div class="summary"><p>I bought my first Apple computer in 2007 after a long time of gaming on Windows and a few years of Linux. In the beginning, I was just amazed at the consistency, practicality and sanity of the whole experience. I think I had a bad case of tinkeritis and neophilia in my Linux days, so this was probably to be expected.</p>
<p>Later, I marveled at the level of polish in the third party software ecosystem around Macs. Then I was just glad to have a slick GUI with actual Unix underpinnings. For reference, this happened in the time span from ...</p> <a class="btn btn-info xsmall" href=".././how-apple-is-failing-me.html">read more</a></div>
    </div>	
				
    

 

        


 

    <div class='article'>
        <a href=".././blogging-with-pelican-and-not-octopress.html"><h2>Blogging with Pelican (and not Octopress)</h2></a>
        <div class= "well small"> 18/07/2012


by <a class="url fn" href=".././author/bastian-bechtold.html">Bastian Bechtold</a>
 



 </div>
        <div class="summary"><p>For a while now, I have been moving more and more services I use off Google. The reasons for that are manyfold, and few of them have anything to do with Google being evil or not--just to get that out of the way.</p>
<p>One of the last holdouts has been <a href="http://daskrachen.com">my neglected Blogspot blog</a>. And one of the reasons for it being neglected is that it was hosted on Blogspot. Now don't get me wrong here, Blogspot is a terriffic blogging platform. You have this very nice nearly-WYSIWYG text editor right in your browser, you can upload images, you ...</p> <a class="btn btn-info xsmall" href=".././blogging-with-pelican-and-not-octopress.html">read more</a></div>
    </div>	
				
    
        <div class="pagination">
<ul>

    <li class="prev disabled"><a href="#">&larr; Previous</a></li>



    <li class="active"><a href=".././category/all.html">1</a></li>

    <li class=""><a href=".././category/all2.html">2</a></li>

    <li class=""><a href=".././category/all3.html">3</a></li>

    <li class=""><a href=".././category/all4.html">4</a></li>



    <li class="next"><a href=".././category/all2.html">Next &rarr;</a></li>


</ul>
</div>
    

 

 
 


        </div>
        
        <div class="span3">

            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Site
                </li>
            
                <li><a href=".././archives.html">Archives</a>
                <li><a href=".././tags.html">Tags</a>
                <li><a href=".././" rel="alternate">Atom feed</a></li>
                
                <li><a href=".././feeds/all.rss.xml" rel="alternate">RSS feed</a></li>
                
            </ul>
            </div>


            
            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Categories
                </li>
                
                
                <li><a href=".././category/all.html">all</a></li>
                                   
            </ul>
            </div>
            


            


            
            <div class="social">
            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Social
                </li>
           
                
                <li><a href="http://twitter.com/paperflyer">twitter</a></li>
                
                <li><a href="http://github.com/bastibe">github</a></li>
                
            </ul>
            </div>
            </div>
            

        </div>  
    </div> 
    </div> 

<footer>
<br />
<p><a href="../.">Bastis Scratchpad On The Internet</a> &copy; Bastian Bechtold 2012</p>
</footer>

</div> <!-- /container -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-collapse.js"></script>


<a href="http://github.com/bastibe/"><img style="position: absolute; top: 40px; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub" /></a>
 
</body>
</html>