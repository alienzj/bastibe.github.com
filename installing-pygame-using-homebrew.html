<!doctype html>
<html lang="">	
<head>
	<meta charset="utf-8"/>
	<title>Installing Pygame using Homebrew - Das Krachen</title>	
	<meta name="author" content="Bastian Bechtold">
	
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0">
	
	<link href='http://fonts.googleapis.com/css?family=Droid+Sans:700,400|Droid+Sans+Mono' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
		
	<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	
	
	
	
	<link href="./feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Das Krachen ATOM Feed" />
	
	<link href="./feeds/all.rss.xml" type="application/atom+xml" rel="alternate" title="Das Krachen RSS Feed" />
	
</head>
	
<body>		
	<header class="clearfix" role="banner">
		<div class="wrapper">
			<h1 class="huge"><a href=".">Das Krachen</a></h1>
		</div>
	</header>
	
	
<div role="main" class="content clearfix">	
	<article>
		<div class="post wrapper">
			<h1>Installing Pygame using Homebrew</h1>
			<p>So I want to do audio development on the Mac without using Matlab. An alternative to Matlab is Python, or rather, <a href="http://www.daskrachen.com/2011/02/installing-pythonnumpyscipymatplotlib.html">Numpy, Scipy and Matplotlib</a>. They are awesome for working with audio data. What they don't do however is playing back audio. There are several packages out there that would afford audio playback. If you are serious about this though, you not only want audio playback, you want asynchronous audio playback. That is, you want to send some audio data to the sound card and continue with your program without waiting for the audio to finish playing. This allows continuous audio playback of computer-generated sound.</p>
<p><a href="http://www.pygame.org/news.html">Pygame</a> is one package that allows this. (I will submit a patch to <a href="http://people.csail.mit.edu/hubert/pyaudio/">Pyaudio</a> soon that will enable it there, too). There are pre-built binaries on the Pygame website that you can install easily. But then there would be no easy way to uninstall them, so what I would rather want is to install Pygame using package managers that allow easy updating and uninstallation. My tool of choice on the Mac is of course <a href="https://github.com/mxcl/homebrew/">Homebrew</a>.</p>
<p>Note that although I am mostly interested in audio playback, this post will detail the installation of all modules of Pygame, not just <code>pygame.mixer</code>.</p>
<p>Homebrew won't install Pygame, but it will install all the prerequisites for Pygame. So, let's do that.</p>
<div class="codehilite"><pre><span class="n">brew</span> <span class="n">install</span> <span class="n">sdl</span><span class="p">,</span> <span class="n">sdl_mixer</span><span class="p">,</span> <span class="n">sdl_ttf</span><span class="p">,</span> <span class="n">libpng</span><span class="p">,</span> <span class="n">jpeg</span><span class="p">,</span> <span class="n">sdl_image</span><span class="p">,</span> <span class="n">portmidi</span>
</pre></div>


<p>This will install most packages for you. Note that <code>libpng</code> is also available as a system library, so it is installed <code>keg_only</code>, that is, without linking it in your path. We will need to compile against it though, so the next step is</p>
<div class="codehilite"><pre><span class="n">brew</span> <span class="n">link</span> <span class="n">libpng</span>
</pre></div>


<p>Now there is still one package missing, <code>smpeg</code>. Sadly, <code>smpeg</code> does not install its headers, so you can't compile against it. To fix that, type</p>
<div class="codehilite"><pre><span class="n">brew</span> <span class="n">edit</span> <span class="n">smpeg</span>
</pre></div>


<p>and add the following line just above the two end at the end of the file</p>
<div class="codehilite"><pre><span class="n">include</span><span class="p">.</span><span class="n">install</span> <span class="n">Dir</span><span class="p">[</span>&quot;<span class="o">*</span><span class="p">.</span><span class="n">h</span>&quot;<span class="p">]</span>
</pre></div>


<p>Then save the file. (I submitted a bug to have this fixed, so you might not need to do this when you read this). Now you can install <code>smpeg</code> with the usual</p>
<div class="codehilite"><pre><span class="n">brew</span> <span class="n">install</span> <span class="n">smpeg</span>
</pre></div>


<p>and you will get the headers, too. Isn't Homebrew great?</p>
<p>Now that all the prerequisites are met, lets look at Pygame itself. This is rather more difficult, as it will not build properly against Homebrew libraries on its own. First, download the source package of Pygame from the <a href="http://www.pygame.org/download.shtml">official website</a>. Unpack it to some directory.</p>
<p>Now open a terminal and navigate to that directory. Me, I like <a href="http://iterm.sourceforge.net/">iTerm</a>, but Terminal.app will do just fine, too. In there, run <code>python config.py</code> to create an initial setup file.</p>
<p>At this point, the setup file is mostly useless since <code>config.py</code> failed to find any homebrew-installed library. It is also strangely garbled, so there is some manual labor to do. Open the file <code>Setup</code> (no extension) in your favourite text editor. After the first comment block, you will see a line that looks like this</p>
<div class="codehilite"><pre><span class="n">SDL</span> <span class="p">=</span> <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">NEED_INC_PATH_FIX</span> <span class="o">-</span><span class="n">L</span><span class="o">/</span><span class="n">NEED_LIB_PATH_FIX</span> <span class="o">-</span><span class="n">lSDL</span>
</pre></div>


<p>Obviously, this is lacking the paths to the SDL library. If you installed Homebrew to its default directory, this will be in <code>/usr/local…</code>. Hence, change this line to</p>
<div class="codehilite"><pre><span class="n">SDL</span> <span class="p">=</span> <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">SDL</span> <span class="o">-</span><span class="n">L</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">lSDL</span>
</pre></div>


<p>The next lines are strangely garbled. They say, for example</p>
<div class="codehilite"><pre><span class="n">FONT</span> <span class="p">=</span> <span class="o">-</span><span class="n">lS</span> <span class="o">-</span><span class="n">lD</span> <span class="o">-</span><span class="n">lL</span> <span class="o">-</span><span class="n">l_</span> <span class="o">-</span><span class="n">lt</span> <span class="o">-</span><span class="n">lt</span> <span class="o">-</span><span class="n">lf</span>
</pre></div>


<p>Where they actually should say</p>
<div class="codehilite"><pre><span class="n">FONT</span> <span class="p">=</span> <span class="o">-</span><span class="n">lSDL_ttf</span>
</pre></div>


<p>Instead of having one <code>-l</code> and then the library name <code>SDL_ttf</code>, they put <code>-l</code> in front of every single letter of the name. This is strange, and certainly wrong. So, correct it for <code>FONT</code>, <code>IMAGE</code>, <code>MIXER</code> and <code>SMPEG</code>.</p>
<p>Note that I did not tell you to do this for <code>PORTTIME</code>, too. Actually, <code>PORTTIME</code> is already correctly linked in <code>PORTMIDI</code>, so you don't need that at all any more. Just delete or comment the <code>PORTTIME</code> line.</p>
<p>Now that all the dependencies are corrected, lets enable the features. A few lines further down, there will be a block of lines, where most lines begin with a <code>#</code> except for the ones beginning with <code>_numericsurfarray…</code> and <code>_camera…</code>, These are the different features of Pygame: The ones with the <code>#</code> are disabled, the other two are enabled.</p>
<p>With all the stuff we installed earlier, you can now enable all features (remove the <code>#</code> in front of <code>imageext…</code>, <code>font…</code>, <code>mixer…</code>, <code>mixer_music…</code>, <code>_minericsndarray…</code>, <code>movie…</code>, <code>scrap…</code> and <code>pypm…</code>).</p>
<p>Remember we disabled <code>PORTTIME</code> a while ago? Right, so we have to remove that dependency: In the line starting with <code>pypm…</code>, delete the part that says <code>$(PORTTIME)</code>. Great. That was easy, right? Now save that file and go back to the Terminal.</p>
<p>We are now going to compile and install Pygame. The nice thing is, even though we are installing it manually, it will go in the right directories and it will be registered with <code>pip</code> or <code>easy_install</code>, so you can just invoke them if you want to uninstall it later by typing <code>pip uninstall pygame</code>. This is something I love about Python!</p>
<p>Alright, now without further ado, install Pygame by typing</p>
<div class="codehilite"><pre><span class="n">python</span> <span class="n">setup</span><span class="p">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>


<p>Great! That's it! Everything should work now!</p>
			
			<a href="https://twitter.com/share" class="twitter-share-button" data-via="paperflyer" data-lang="en" data-size="large" data-related="paperflyer">Tweet</a>
			<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
						
			
			<div class="comments">
			<h2>Comments !</h2>
			    <div id="disqus_thread"></div>
			    <script type="text/javascript">
			       var disqus_identifier = "installing-pygame-using-homebrew.html";
			       (function() {
			       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			       dsq.src = 'http://bastibe.disqus.com/embed.js';
			       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			      })();
			    </script>
			</div>
						
		</div>
	
	<div class="meta wrapper">
	<time datetime="2011-03-04T14:16:00" pubdate>Fri 04 March 2011</time>
	<ul class="tag clearfix">
		<li><a href="./">misc</a></li>

	
		<li><a href="./">compiling</a></li>
	
		<li><a href="./">numpy</a></li>
	
		<li><a href="./">scipy</a></li>
	
		<li><a href="./">matplotlib</a></li>
	
		<li><a href="./">homebrew</a></li>
	
		<li><a href="./">pygame</a></li>
	

	</ul>
	
</div>
	</article>	
</div>

	
		
<footer class="clearfix">
	<div class="wrapper pages">
		<ul class="nav">
		
			<li><a href="./archives.html">Archive</a></li>
		</ul>
	</div>
	
	<div class="copy wrapper">
		<ul class="social">
			
			<li><a href="http://twitter.com/paperflyer">twitter</a></li>
			
			<li><a href="http://github.com/bastibe">github</a></li>
			
		</ul>
	
		<p role="contentinfo">© 2012 Bastian Bechtold<br>
		Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">Pelican</a>.</p>
	</div>
</footer>
	
	<script>
	  var _gaq=[['_setAccount',''],['_trackPageview']];
	  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
	  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
	  s.parentNode.insertBefore(g,s)}(document,'script'));
	</script>
</body>
</html>